!function(n,t){"object"==typeof exports&&"object"==typeof module?module.exports=t():"function"==typeof define&&define.amd?define("Oni",[],t):"object"==typeof exports?exports.Oni=t():n.Oni=t()}(this,(()=>(()=>{"use strict";var n={};return(()=>{var t=n;Object.defineProperty(t,"__esModule",{value:!0}),t.default=function(n,t){var a=[],r=new Set,i=e(n),c=function(){return i},u=function(n){if(n.call)return r.add(n),function(){r.delete(n)}},f=function(n,t){return a.push({action:n,payload:t}),new Promise((function(e){return o((function(o){return d({action:n,payload:t},e)}))}))},l=function(n){u((function(t,e){var o=e.action,a=e.payload;o in n&&n[o].call(null,t,{action:o,payload:a})}))},d=function(n,e){var o=n.action,d=n.payload,s=void 0===d?{}:d;a.forEach((function(n){var e=n.action,o=n.payload,a=void 0===o?{}:o;if(e in t){var r=t[e].call(null,i,a,{getState:c,subscribe:u,dispatch:f,patternMatch:l});Object.assign(i,r)}else console.log("[Oni] Error -> No action [ ".concat(e," ] found."))})),a.length&&(r.forEach((function(n){return n(i,{action:o,payload:s})})),a=[]),e(i)};return{getState:c,subscribe:u,dispatch:f,patternMatch:l,destroy:function(){return r.clear()}}};var e=function(n){return JSON.parse(JSON.stringify(n))},o=function(n){return requestAnimationFrame?requestAnimationFrame(n):0}})(),n})()));