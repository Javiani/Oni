!function(n,t){"object"==typeof exports&&"object"==typeof module?module.exports=t():"function"==typeof define&&define.amd?define("pandora",[],t):"object"==typeof exports?exports.pandora=t():n.pandora=t()}(this,(()=>(()=>{"use strict";var n={};return(()=>{var t=n;Object.defineProperty(t,"__esModule",{value:!0}),t.default=function(n,t){var r=[],a=[],i=e(n),u=function(){return i},c=function(n){n.call&&r.push(n)},f=function(n){r=r.filter((function(t){return t!=n}))},s=function(n,t){return a.push({action:n,payload:t}),new Promise((function(e){return o((function(o){return d({action:n,payload:t},e)}))}))},d=function(n,e){var o=n.action,d=n.payload,p=void 0===d?{}:d;a.forEach((function(n){var e=n.action,o=n.payload,r=void 0===o?{}:o;if(e in t){var a=t[e].call(null,i,r,{getState:u,subscribe:c,unsubscribe:f,dispatch:s});Object.assign(i,a)}else console.log("[Pandora] Error -> No action [ ".concat(e," ] found."))})),a.length&&(r.forEach((function(n){n(i,{action:o,payload:p})})),a=[]),e(i)};return{getState:u,subscribe:c,unsubscribe:f,dispatch:s}};var e=function(n){return JSON.parse(JSON.stringify(n))},o=function(n){return requestAnimationFrame?requestAnimationFrame(n):0}})(),n})()));